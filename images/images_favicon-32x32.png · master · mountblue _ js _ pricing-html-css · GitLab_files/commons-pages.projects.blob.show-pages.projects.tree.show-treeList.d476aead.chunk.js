(this.webpackJsonp=this.webpackJsonp||[]).push([[156],{"+Q53":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));const i=function(e,t,n){if(!e)return void(document.title=n+" · GitLab");const i=e.replace(/^\//,""),a=""===i;document.title=`${a?"Files":i} · ${t} · ${n} · GitLab`};function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;const{title:n=""}=t,i=n.split(" · ");i.length>1&&(i[1]=e,t.title=i.join(" · "))}},"1EyP":function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getCodeOwnersInfo"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"projectPath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filePath"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"ref"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"project"},arguments:[{kind:"Argument",name:{kind:"Name",value:"fullPath"},value:{kind:"Variable",name:{kind:"Name",value:"projectPath"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"blobs"},arguments:[{kind:"Argument",name:{kind:"Name",value:"paths"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"filePath"}}]}},{kind:"Argument",name:{kind:"Name",value:"ref"},value:{kind:"Variable",name:{kind:"Name",value:"ref"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"codeOwners"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"webPath"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}],loc:{start:0,end:331}};n.loc.source={body:"query getCodeOwnersInfo($projectPath: ID!, $filePath: String!, $ref: String!) {\n  project(fullPath: $projectPath) {\n    id\n    repository {\n      blobs(paths: [$filePath], ref: $ref) {\n        nodes {\n          id\n          codeOwners {\n            id\n            name\n            webPath\n          }\n        }\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var i={};function a(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}n.definitions.forEach((function(e){if(e.name){var t=new Set;!function e(t,n){if("FragmentSpread"===t.kind)n.add(t.name.value);else if("VariableDefinition"===t.kind){var i=t.type;"NamedType"===i.kind&&n.add(i.name.value)}t.selectionSet&&t.selectionSet.selections.forEach((function(t){e(t,n)})),t.variableDefinitions&&t.variableDefinitions.forEach((function(t){e(t,n)})),t.definitions&&t.definitions.forEach((function(t){e(t,n)}))}(e,t),i[e.name.value]=t}})),e.exports=n,e.exports.getCodeOwnersInfo=function(e,t){var n={kind:e.kind,definitions:[a(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var s=i[t]||new Set,o=new Set,r=new Set;for(s.forEach((function(e){r.add(e)}));r.size>0;){var l=r;r=new Set,l.forEach((function(e){o.has(e)||(o.add(e),(i[e]||new Set).forEach((function(e){r.add(e)})))}))}return o.forEach((function(t){var i=a(e,t);i&&n.definitions.push(i)})),n}(n,"getCodeOwnersInfo")},"65S1":function(e,t,n){"use strict";n.r(t);var i=n("q+nE"),a=n("oj/M"),s=n("yYHy"),o=n("6+hW");t.default=function(e){let{el:t,router:n}=e;if(!t)return;const{projectPath:r,ref:l,isBlob:c,webIdeUrl:d,...u}=Object(a.j)(JSON.parse(t.dataset.options));new i.default({el:t,router:n,render(e){var t;return e(o.a,{props:{isBlob:c,webIdeUrl:c?d:Object(s.R)(Object(s.y)("/",r,"edit",l,"-",(null===(t=this.$route)||void 0===t?void 0:t.params.path)||"","/")),...u}})}})}},"9Ku8":function(e,t,n){"use strict";function i(){const{url:e}=gon.sourcegraph||{};if(!e)return;const t=new URL("/assets/webpack/sourcegraph/0.0.84/",window.location.href),n=new URL("scripts/integration.bundle.js",t).href;window.SOURCEGRAPH_ASSETS_URL=t.href,window.SOURCEGRAPH_URL=e,window.SOURCEGRAPH_INTEGRATION="gitlab-integration",function(e){const t=document.createElement("script");t.type="application/javascript",t.src=e,t.defer=!0,document.head.appendChild(t)}(n)}n.d(t,"a",(function(){return i}))},H3s2:function(e,t,n){"use strict";n("JHu5"),n("3R5X"),n("XUYm");var i=n("yYHy"),a=n("An+7");const s=/^(L|LC)[0-9]+/;t.a=function(e,t,n){if(!e)return;const o=function(){setTimeout((function(){!function(e){const t=Object(i.l)();if(t&&s.test(t)){const n="#"+t;[].concat(Array.prototype.slice.call(e)).forEach((function(e){const i=e.dataset.originalHref||function(){const t=e.getAttribute("href");return e.dataset.originalHref=t,t}(),s=parseInt(t.split("L")[1],10),o=Object(a.a)(s),r=Object(a.b)(i,o);e.setAttribute("href",`${i}${r}${n}`)}))}}(n)}),0)};e.addEventListener("click",(function(e){e.target.matches(t)&&o()})),o()}},Ng9o:function(e,t,n){"use strict";n("h8Et");var i=n("H8gz");const a=[8,12,14,16,24,32,48,72];var s={components:{GlIcon:i.a},props:{status:{type:Object,required:!0},size:{type:Number,required:!1,default:16,validator:e=>a.includes(e)},isActive:{type:Boolean,required:!1,default:!1},isBorderless:{type:Boolean,required:!1,default:!1},isInteractive:{type:Boolean,required:!1,default:!1},cssClasses:{type:String,required:!1,default:""}},computed:{wrapperStyleClasses(){const e=this.status.group;return`ci-status-icon ci-status-icon-${e} js-ci-status-icon-${e} gl-rounded-full gl-justify-content-center`},icon(){return this.isBorderless?this.status.icon+"_borderless":this.status.icon}}},o=n("bPvS"),r=Object(o.a)(s,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{class:[e.wrapperStyleClasses,{interactive:e.isInteractive,active:e.isActive,borderless:e.isBorderless}],style:{height:e.size+"px",width:e.size+"px"},attrs:{"data-testid":"ci-icon-wrapper"}},[n("gl-icon",{class:e.cssClasses,attrs:{name:e.icon,size:e.size,"aria-label":e.status.icon}})],1)}),[],!1,null,null,null);t.a=r.exports},R8yi:function(e,t,n){"use strict";var i=n("CkNe"),a=(n("JHu5"),n("3R5X"),n("XUYm"),n("0no1"),n("gdbl"),n("mphk"));n("N8nX"),n("c5nz"),n("OZcL"),n("x5O4"),n("lxnW"),n("5sVn"),n("4xRc"),n("LM9r"),n("51O6"),n("une/"),n("Kypc"),n("yt6R"),n("6v3E"),n("RsOv"),n("WmlO"),n("W9Nl");const s=function(e){let{nodeType:t}=e;return 3===t},o=function(e,t){const n=document.createElement("span");return n.innerText=e,n.classList=t||"",n},r=function(e,t){const n=o();return n.innerHTML=function(e){return e.replace(/ /g,o(" ").outerHTML).replace(/\t/g,o("\t").outerHTML)}(e),n.childNodes.forEach((function(n){return function(e,t,n){if(s(e)&&(i=e.textContent,a=t,(r=i)&&!/^\s*$/.test(r)&&i.trim()===a.trim())){const i=o(t.trim(),n);e.replaceWith(i)}var i,a,r}(n,e,t)})),n.childNodes},l=new Map,c=function(){return l.get("current")},d=function(e){let{path:t,d:n,wrapTextNodes:i}=e;const a=n.start_line+1,o=document.querySelector(`[data-path="${t}"]`).querySelectorAll(`.blob-content #LC${a}, .line_content:not(.old) #LC${a}`);null!=o&&o.length&&o.forEach((function(e){let t=0;i&&e.childNodes.forEach((function(e){e.replaceWith(...r(e.textContent,e.classList))}));const a=[...e.childNodes].find((function(e){let{textContent:i}=e;return t===n.start_char||(t+=i.length,!1)}));a&&!s(a)&&(a.dataset.charIndex=n.start_char,a.dataset.lineIndex=n.start_line,a.classList.add("cursor-pointer","code-navigation","js-code-navigation"),a.closest(".line").classList.add("code-navigation-line"))}))};var u={setInitialData(e,t){let{commit:n}=e;n("SET_INITIAL_DATA",t)},requestDataError(e){let{commit:t}=e;t("REQUEST_DATA_ERROR")},fetchData(e){let{commit:t,dispatch:n,state:i}=e;t("REQUEST_DATA"),i.blobs.forEach((function(e){let{path:s,codeNavigationPath:o}=e;a.a.get(o).then((function(e){let{data:n}=e;const a=n.reduce((function(e,t){var n;t.hover&&(e[`${t.start_line}:${t.start_char}`]={...t,definitionLineNumber:parseInt((null===(n=t.definition_path)||void 0===n?void 0:n.split("#L").pop())||0,10)},d({path:s,d:t,wrapTextNodes:i.wrapTextNodes}));return e}),{});t("REQUEST_DATA_SUCCESS",{path:s,normalizedData:a})})).catch((function(){return n("requestDataError")}))}))},showBlobInteractionZones(e,t){let{state:n}=e;n.data&&n.data[t]&&Object.values(n.data[t]).forEach((function(e){return d({path:t,d:e,wrapTextNodes:n.wrapTextNodes})}))},showDefinition(e,t){let n,i,{commit:a,state:s}=e,{target:o}=t;if(!s.data)return;const r=o.classList.contains("hll");c()&&c().classList.remove("hll");const d=o.closest("[data-path]");if(!d)return void a("SET_CURRENT_DEFINITION",{definition:n,position:i});const u=d.dataset.path,f=s.data[u];if(f){if(o.closest(".js-code-navigation")&&!r){const{lineIndex:e,charIndex:t}=o.dataset,{x:a,y:s}=o.getBoundingClientRect();i={x:a||0,y:s+window.scrollY||0,height:o.offsetHeight,lineIndex:parseInt(e,10)},n=f[`${e}:${t}`],o.classList.add("hll"),function(e){l.set("current",e)}(o)}a("SET_CURRENT_DEFINITION",{definition:n,position:i,blobPath:u})}}},f={SET_INITIAL_DATA(e,t){let{blobs:n,definitionPathPrefix:i,wrapTextNodes:a}=t;e.blobs=n,e.definitionPathPrefix=i,e.wrapTextNodes=a},REQUEST_DATA(e){e.loading=!0},REQUEST_DATA_SUCCESS(e,t){let{path:n,normalizedData:i}=t;e.loading=!1,e.data={...e.data,[n]:i}},REQUEST_DATA_ERROR(e){e.loading=!1},SET_CURRENT_DEFINITION(e,t){let{definition:n,position:i,blobPath:a}=t;e.currentDefinition=n,e.currentDefinitionPosition=i,e.currentBlobPath=a}};t.a=function(){return new i.b.Store({actions:u,mutations:f,state:{blobs:[],loading:!1,data:null,wrapTextNodes:!1,currentDefinition:null,currentDefinitionPosition:null,currentBlobPath:null}})}},gBaY:function(e,t,n){"use strict";var i=n("H8gz"),a=n("u1ru"),s=n("cuRJ"),o=n("t9l/"),r=n("teVv"),l=n("mcoW"),c=n("e9rI"),d=n("1EyP"),u=n.n(d),f={i18n:{title:Object(o.a)("Code owners"),about:Object(o.a)("About this feature"),and:Object(o.a)("and"),errorMessage:Object(o.a)("An error occurred while loading code owners.")},codeOwnersHelpPath:Object(l.a)("user/project/code_owners"),components:{GlIcon:i.a,GlLink:a.a,GlButton:s.a},mixins:[c.a],apollo:{project:{query:u.a,variables(){return{projectPath:this.projectPath,filePath:this.filePath,ref:this.branch||this.ref}},skip(){return!this.filePath},result(){this.isFetching=!1},error(){Object(r.createAlert)({message:this.$options.i18n.errorMessage})}}},props:{projectPath:{type:String,required:!0},filePath:{type:String,required:!1,default:null},branch:{type:String,required:!1,default:null}},data:()=>({isFetching:!1,isCodeOwnersExpanded:!1,project:{repository:{blobs:{nodes:[{codeOwners:[]}]}}}}),computed:{blobInfo(){var e,t,n;return null===(e=this.project)||void 0===e||null===(t=e.repository)||void 0===t||null===(n=t.blobs)||void 0===n?void 0:n.nodes[0]},visibleCodeOwners(){var e;return(null===(e=this.blobInfo)||void 0===e?void 0:e.codeOwners.slice(0,5))||[]},collapsedCodeOwners(){var e;return(null===(e=this.blobInfo)||void 0===e?void 0:e.codeOwners.slice(5))||[]},lastIndexOfCollapsedCodeOwners(){return this.collapsedCodeOwners.length-1},toggleText(){return this.isCodeOwnersExpanded?Object(o.a)("show less"):Object(o.h)(Object(o.a)("%{count} more"),{count:this.collapsedCodeOwners.length})},hasCodeOwners(){return this.filePath&&Boolean(this.visibleCodeOwners.length)},commaSeparateList(){return this.visibleCodeOwners.length>1}},watch:{filePath(){this.isFetching=!0,this.$apollo.queries.project.refetch()}},methods:{toggleCodeOwners(){this.isCodeOwnersExpanded=!this.isCodeOwnersExpanded}}},p=n("bPvS"),h=Object(p.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.hasCodeOwners&&!e.isFetching?n("div",{staticClass:"well-segment blob-auxiliary-viewer file-owner-content gl-display-flex gl-flex-wrap"},[n("div",{staticClass:"gl-display-inline gl-mr-2"},[n("gl-icon",{attrs:{name:"users","data-testid":"users-icon"}}),e._v(" "),n("strong",[e._v(e._s(e.$options.i18n.title))]),e._v(" "),n("gl-link",{attrs:{href:e.$options.codeOwnersHelpPath,target:"_blank",title:e.$options.i18n.about}},[n("gl-icon",{attrs:{name:"question-o","data-testid":"help-icon"}})],1),e._v("\n    :\n  ")],1),e._v(" "),e._l(e.visibleCodeOwners,(function(t,i){return n("div",{key:t.id,attrs:{"data-testid":"code-owners"}},[e.commaSeparateList&&i>0?n("span",{attrs:{"data-testid":"comma-separator"}},[e._v(", ")]):e._e(),e._v(" "),n("gl-link",{attrs:{href:t.webPath,target:"_blank",title:e.$options.i18n.about}},[e._v("\n      "+e._s(t.name)+"\n    ")])],1)})),e._v(" "),e.collapsedCodeOwners.length&&e.isCodeOwnersExpanded?e._l(e.collapsedCodeOwners,(function(t,i){return n("div",{key:t.id,staticClass:"gl-display-inline",attrs:{"data-testid":"code-owners"}},[i!==e.lastIndexOfCollapsedCodeOwners?n("span",{attrs:{"data-testid":"comma-separator"}},[e._v(",\n      ")]):n("span",{staticClass:"gl-ml-2",attrs:{"data-testid":"and-separator"}},[e._v(" "+e._s(e.$options.i18n.and)+" ")]),e._v(" "),n("gl-link",{attrs:{href:t.webPath,target:"_blank",title:e.$options.i18n.about}},[e._v("\n        "+e._s(t.name)+"\n      ")])],1)})):e._e(),e._v(" "),e.collapsedCodeOwners.length?[e.isCodeOwnersExpanded?e._e():n("span",{staticClass:"gl-ml-2"},[e._v(" "+e._s(e.$options.i18n.and)+" ")]),e._v(" "),n("gl-button",{staticClass:"gl-vertical-align-text-bottom gl-ml-2",attrs:{variant:"link"},on:{click:e.toggleCodeOwners}},[e._v("\n      "+e._s(e.toggleText)+"\n    ")])]:e._e()],2):e._e()}),[],!1,null,null,null);t.a=h.exports},"rjO+":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("O6x3"),a=n.n(i),s=n("uw3E"),o=n("yYHy"),r=n("+Q53"),l=n("79X9");const c={skipResetBindings:!1,fileBlobPermalinkUrl:null,fileBlobPermalinkUrlElement:null};class d extends l.default{constructor(e){const t={...c,...e};super(t.skipResetBindings),this.options=t,this.shortcircuitPermalinkButton(),a.a.bind(Object(s.sb)(s.bb),this.moveToFilePermalink.bind(this))}moveToFilePermalink(){const e=this.options.fileBlobPermalinkUrl;if(e){const t=Object(o.l)(),n=t?"#"+t:"";Object(o.P)(e)&&Object(o.N)({url:`${e}${n}`,title:document.title}),Object(o.O)({url:e})&&Object(r.b)(Object(o.p)({url:e}))}}shortcircuitPermalinkButton(){var e=this;const t=this.options.fileBlobPermalinkUrlElement,n=function(t){var n;(n=t).ctrlKey||n.metaKey||n.shiftKey||(t.preventDefault(),e.moveToFilePermalink())};t&&t.addEventListener("click",n)}}}}]);
//# sourceMappingURL=commons-pages.projects.blob.show-pages.projects.tree.show-treeList.d476aead.chunk.js.map